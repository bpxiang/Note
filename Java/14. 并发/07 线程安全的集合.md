# 线程安全的集合
>time: 2018-08-06 17:42:09

如果多线程要并发地修改一个数据结构，例如散列表，那么很容易会破坏这个数据结构。

可以通过提供锁来保护共享数据结构，但是选择线程安全的实现作为替代可能更容易些。阻塞队列就是线程安全的集合。

## 1. 高效的映射、集和队列

java.util.concurrent 包提供了映射、有序集和队列的高效实现： ConcurrentHashMap、ConcurrentSkipListMap、ConcurrentSkipListSet 和 ConcurrentLinkedQueue。

这些集合使用复杂的算法，通过允许并发地访问数据结构的不同部分来使竞争极小化。

与大多数集合不同，size 方法不必在常量时间内操作。确定这样的集合当前的大小通常需要遍历。

***
**注释**： 有些应用使用庞大的并发散列映射，这些映射太过庞大，以至于无法用 size 方法得到它的大小，因为这个方法只能返回 int。对于一个包含超过 20 亿条目的映射该如何处理？Java SE 8 引入了一个 mappingCount 方法可以把大小作为 long 返回。
***

